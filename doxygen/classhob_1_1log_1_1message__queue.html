<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=9"/>
		<meta name="generator" content="Doxygen 1.9.1"/>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		<title>Heap of Battle: hob::log::message_queue Class Reference</title>
		<link href="tabs.css" rel="stylesheet" type="text/css"/>
		<script type="text/javascript" src="jquery.js"></script>
		<script type="text/javascript" src="dynsections.js"></script>
		<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
		<link href="doxygen.css" rel="stylesheet" type="text/css" />
		<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="custom_dark_theme.css" rel="stylesheet" type="text/css"/>
	</head>
	<body>
	<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
		<div id="titlearea">
			<table cellspacing="0" cellpadding="0">
				<tbody>
					<tr style="height: 56px;">
						<td id="projectlogo"><img alt="Logo" src="icon.png"/></td>
						<td id="projectalign" style="padding-left: 0.5em;">
							<div id="projectname">Heap of Battle
								&#160;<span id="projectnumber">DEVELOPMENT</span>
							</div>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<!-- end header part --><!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacehob.html">hob</a></li><li class="navelem"><a class="el" href="namespacehob_1_1log.html">log</a></li><li class="navelem"><a class="el" href="classhob_1_1log_1_1message__queue.html">message_queue</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classhob_1_1log_1_1message__queue-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">hob::log::message_queue Class Reference<span class="mlabels"><span class="mlabel">final</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>Thread safe STL queue for one consumer thread and one supplier thread. It is used for sending messages to the thread that does the logging.  
 <a href="classhob_1_1log_1_1message__queue.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="message__queue_8hpp_source.html">message_queue.hpp</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for hob::log::message_queue:</div>
<div class="dyncontent">
<div class="center"><img src="classhob_1_1log_1_1message__queue__coll__graph.png" border="0" usemap="#ahob_1_1log_1_1message__queue_coll__map" alt="Collaboration graph"/></div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a5bf9f0c5e53d10d5bcc3642476e9308c"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhob_1_1log_1_1message__queue.html#a5bf9f0c5e53d10d5bcc3642476e9308c">payload</a> = std::pair&lt; std::uint8_t, std::string &gt;</td></tr>
<tr class="memdesc:a5bf9f0c5e53d10d5bcc3642476e9308c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The data type of the log that is being stored inside the queue.  <a href="classhob_1_1log_1_1message__queue.html#a5bf9f0c5e53d10d5bcc3642476e9308c">More...</a><br /></td></tr>
<tr class="separator:a5bf9f0c5e53d10d5bcc3642476e9308c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6f2a915b99bded5eee149fbbd75b10ad"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhob_1_1log_1_1message__queue.html#a6f2a915b99bded5eee149fbbd75b10ad">is_empty</a> (void) const noexcept</td></tr>
<tr class="memdesc:a6f2a915b99bded5eee149fbbd75b10ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the queue has any message stored in it.  <a href="classhob_1_1log_1_1message__queue.html#a6f2a915b99bded5eee149fbbd75b10ad">More...</a><br /></td></tr>
<tr class="separator:a6f2a915b99bded5eee149fbbd75b10ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc46e49c8740440dd8ed867f2b8f1baf"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhob_1_1log_1_1message__queue.html#abc46e49c8740440dd8ed867f2b8f1baf">emplace</a> (std::uint8_t severity_bit, std::string &amp;&amp;message) noexcept</td></tr>
<tr class="memdesc:abc46e49c8740440dd8ed867f2b8f1baf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Emplaces a log at the end of the queue.  <a href="classhob_1_1log_1_1message__queue.html#abc46e49c8740440dd8ed867f2b8f1baf">More...</a><br /></td></tr>
<tr class="separator:abc46e49c8740440dd8ed867f2b8f1baf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb143b5d3a36d17a5c628ee631e128fe"><td class="memItemLeft" align="right" valign="top">std::optional&lt; <a class="el" href="classhob_1_1log_1_1message__queue.html#a5bf9f0c5e53d10d5bcc3642476e9308c">payload</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhob_1_1log_1_1message__queue.html#aeb143b5d3a36d17a5c628ee631e128fe">pop</a> (void) noexcept</td></tr>
<tr class="memdesc:aeb143b5d3a36d17a5c628ee631e128fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the message at the beginning of the list and removes it. If the queue is empty waits until a message is being emplaced.  <a href="classhob_1_1log_1_1message__queue.html#aeb143b5d3a36d17a5c628ee631e128fe">More...</a><br /></td></tr>
<tr class="separator:aeb143b5d3a36d17a5c628ee631e128fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1c932f3c95c7665100d6cf4ed7b6e68"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhob_1_1log_1_1message__queue.html#ac1c932f3c95c7665100d6cf4ed7b6e68">interrupt_wait</a> (void) noexcept</td></tr>
<tr class="memdesc:ac1c932f3c95c7665100d6cf4ed7b6e68"><td class="mdescLeft">&#160;</td><td class="mdescRight">Guarantees that the consumer thread is not stuck waiting in a <a class="el" href="classhob_1_1log_1_1message__queue.html#aeb143b5d3a36d17a5c628ee631e128fe" title="Gets the message at the beginning of the list and removes it. If the queue is empty waits until a mes...">pop()</a> call.  <a href="classhob_1_1log_1_1message__queue.html#ac1c932f3c95c7665100d6cf4ed7b6e68">More...</a><br /></td></tr>
<tr class="separator:ac1c932f3c95c7665100d6cf4ed7b6e68"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:aec6b39689605c60e5b617f3f4fd0bb79"><td class="memItemLeft" align="right" valign="top">std::queue&lt; <a class="el" href="classhob_1_1log_1_1message__queue.html#a5bf9f0c5e53d10d5bcc3642476e9308c">payload</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhob_1_1log_1_1message__queue.html#aec6b39689605c60e5b617f3f4fd0bb79">queue</a></td></tr>
<tr class="memdesc:aec6b39689605c60e5b617f3f4fd0bb79"><td class="mdescLeft">&#160;</td><td class="mdescRight">The queue where the messages are being placed.  <a href="classhob_1_1log_1_1message__queue.html#aec6b39689605c60e5b617f3f4fd0bb79">More...</a><br /></td></tr>
<tr class="separator:aec6b39689605c60e5b617f3f4fd0bb79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95f3d9b3a156cc48421344bab6a5d0be"><td class="memItemLeft" align="right" valign="top">std::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhob_1_1log_1_1message__queue.html#a95f3d9b3a156cc48421344bab6a5d0be">mutex</a></td></tr>
<tr class="memdesc:a95f3d9b3a156cc48421344bab6a5d0be"><td class="mdescLeft">&#160;</td><td class="mdescRight">The mutex protecting the queue from multiple threads access.  <a href="classhob_1_1log_1_1message__queue.html#a95f3d9b3a156cc48421344bab6a5d0be">More...</a><br /></td></tr>
<tr class="separator:a95f3d9b3a156cc48421344bab6a5d0be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51f0891308b509ef5b79cf465a69e71d"><td class="memItemLeft" align="right" valign="top">std::condition_variable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhob_1_1log_1_1message__queue.html#a51f0891308b509ef5b79cf465a69e71d">condition_notifier</a></td></tr>
<tr class="memdesc:a51f0891308b509ef5b79cf465a69e71d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The variable that controls the consumer and the supplier thread.  <a href="classhob_1_1log_1_1message__queue.html#a51f0891308b509ef5b79cf465a69e71d">More...</a><br /></td></tr>
<tr class="separator:a51f0891308b509ef5b79cf465a69e71d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Thread safe STL queue for one consumer thread and one supplier thread. It is used for sending messages to the thread that does the logging. </p>
<hr  />
<p>In the case of multiple consumer threads one might empty the queue after the other checked it is not empty. This case is accepted as for the moment is not used this way. </p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a5bf9f0c5e53d10d5bcc3642476e9308c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bf9f0c5e53d10d5bcc3642476e9308c">&#9670;&nbsp;</a></span>payload</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classhob_1_1log_1_1message__queue.html#a5bf9f0c5e53d10d5bcc3642476e9308c">hob::log::message_queue::payload</a> =  std::pair&lt;std::uint8_t, std::string&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The data type of the log that is being stored inside the queue. </p>
<hr  />
 
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a6f2a915b99bded5eee149fbbd75b10ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f2a915b99bded5eee149fbbd75b10ad">&#9670;&nbsp;</a></span>is_empty()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool hob::log::message_queue::is_empty </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if the queue has any message stored in it. </p>
<hr  />
 <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true - queue is empty. </dd>
<dd>
false - queue has at least 1 message. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">N/A.</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abc46e49c8740440dd8ed867f2b8f1baf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc46e49c8740440dd8ed867f2b8f1baf">&#9670;&nbsp;</a></span>emplace()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool hob::log::message_queue::emplace </td>
          <td>(</td>
          <td class="paramtype">std::uint8_t&#160;</td>
          <td class="paramname"><em>severity_bit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string &amp;&amp;&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Emplaces a log at the end of the queue. </p>
<hr  />
 <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">severity_bit</td><td>Bit indicating the type of message that is being logged (see log1cxx::severity_level). </td></tr>
    <tr><td class="paramname">message</td><td>The message of the log. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true - the log has been emplaced successfully. </dd>
<dd>
false - the log has been lost. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">N/A.</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aeb143b5d3a36d17a5c628ee631e128fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb143b5d3a36d17a5c628ee631e128fe">&#9670;&nbsp;</a></span>pop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::optional&lt; <a class="el" href="classhob_1_1log_1_1message__queue.html#a5bf9f0c5e53d10d5bcc3642476e9308c">message_queue::payload</a> &gt; hob::log::message_queue::pop </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the message at the beginning of the list and removes it. If the queue is empty waits until a message is being emplaced. </p>
<hr  />
 <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The first message stored. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">N/A.</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac1c932f3c95c7665100d6cf4ed7b6e68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1c932f3c95c7665100d6cf4ed7b6e68">&#9670;&nbsp;</a></span>interrupt_wait()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void hob::log::message_queue::interrupt_wait </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Guarantees that the consumer thread is not stuck waiting in a <a class="el" href="classhob_1_1log_1_1message__queue.html#aeb143b5d3a36d17a5c628ee631e128fe" title="Gets the message at the beginning of the list and removes it. If the queue is empty waits until a mes...">pop()</a> call. </p>
<hr  />
 <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">N/A.</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="aec6b39689605c60e5b617f3f4fd0bb79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec6b39689605c60e5b617f3f4fd0bb79">&#9670;&nbsp;</a></span>queue</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::queue&lt;<a class="el" href="classhob_1_1log_1_1message__queue.html#a5bf9f0c5e53d10d5bcc3642476e9308c">payload</a>&gt; hob::log::message_queue::queue</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The queue where the messages are being placed. </p>
<hr  />
 
</div>
</div>
<a id="a95f3d9b3a156cc48421344bab6a5d0be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95f3d9b3a156cc48421344bab6a5d0be">&#9670;&nbsp;</a></span>mutex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::mutex hob::log::message_queue::mutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The mutex protecting the queue from multiple threads access. </p>
<hr  />
 
</div>
</div>
<a id="a51f0891308b509ef5b79cf465a69e71d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51f0891308b509ef5b79cf465a69e71d">&#9670;&nbsp;</a></span>condition_notifier</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::condition_variable hob::log::message_queue::condition_notifier</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The variable that controls the consumer and the supplier thread. </p>
<hr  />
 
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>hob-log/include/internal/<a class="el" href="message__queue_8hpp_source.html">message_queue.hpp</a></li>
<li>hob-log/src/<a class="el" href="message__queue_8cpp.html">message_queue.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
		<script src="custom.js"></script>
	</body>
</html>
